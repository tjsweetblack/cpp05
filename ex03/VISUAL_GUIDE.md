# Exercise 03: Visual Guide - Factory Pattern & Function Pointers

## ğŸ¨ Table of Contents
1. [Factory Pattern Overview](#factory-pattern-overview)
2. [Member Function Pointers Visualized](#member-function-pointers-visualized)
3. [Code Flow Diagrams](#code-flow-diagrams)
4. [Memory Model](#memory-model)
5. [Comparison: If/Else vs Factory](#comparison-ifelse-vs-factory)
6. [Class Relationships](#class-relationships)

---

## Factory Pattern Overview

### Concept Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FACTORY PATTERN                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Client Code          Factory               Products            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚          â”‚        â”‚      â”‚            â”‚ Product A  â”‚        â”‚
â”‚  â”‚  Intern  â”‚â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ make â”‚â”€â”€â”€createsâ”€â–¶â”‚            â”‚        â”‚
â”‚  â”‚  intern  â”‚        â”‚ Form â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚          â”‚        â”‚  ()  â”‚            â”‚ Product B  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”˜            â”‚            â”‚        â”‚
â”‚       â”‚                 â”‚                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚       â”‚                 â”‚                â”‚ Product C  â”‚        â”‚
â”‚       â”‚                 â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚       â”‚                 â”‚                                       â”‚
â”‚       â””â”€â”€â”€â”€â”€receivesâ”€â”€â”€â”€â”˜                                       â”‚
â”‚           AForm*                                                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

KEY:
- Client asks factory for a product by name
- Factory decides which product to create
- Client receives generic interface (AForm*)
- Client doesn't know the concrete type
```

### Real-World Analogy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FORM REQUEST OFFICE                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  You (Client)         Intern (Factory)      Forms (Products) â”‚
â”‚                                                               â”‚
â”‚     "I need a          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  robotomy form"        â”‚    Intern   â”‚                       â”‚
â”‚         â”‚              â”‚             â”‚                       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ "Let me get â”‚                       â”‚
â”‚                        â”‚  that for   â”‚                       â”‚
â”‚                        â”‚   you..."   â”‚                       â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                             â”‚                                â”‚
â”‚                             â”‚ searches                       â”‚
â”‚                             â”‚ filing                         â”‚
â”‚                             â”‚ cabinet                        â”‚
â”‚                             â–¼                                â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                        â”‚ Robotomy    â”‚                       â”‚
â”‚         â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Form        â”‚                       â”‚
â”‚    "Here you go!"      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Member Function Pointers Visualized

### Anatomy of a Function Pointer

```
Member Function Pointer Declaration:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    AForm* (Intern::*creator)(const std::string &target)
    â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â”‚       â”‚       â”‚              â”‚
      â”‚       â”‚       â”‚              â””â”€ Parameter type
      â”‚       â”‚       â””â”€ Pointer name
      â”‚       â””â”€ Class that owns the function
      â””â”€ Return type

Think of it as:
"creator is a pointer to a member function of Intern class
 that takes a const string& and returns AForm*"
```

### How Function Pointers Work

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FUNCTION POINTER ANALOGY                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Normal Pointer:                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”      points to      â”Œâ”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ ptr â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚ data â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                              â”‚
â”‚  Function Pointer:                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  points to   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ creator â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ void myFunc()  â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ {              â”‚               â”‚
â”‚                           â”‚    // code...  â”‚               â”‚
â”‚                           â”‚ }              â”‚               â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                              â”‚
â”‚  Member Function Pointer:                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  points to   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ creator â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ AForm* Intern::        â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ createRobotomyForm()   â”‚       â”‚
â”‚                           â”‚ {                      â”‚       â”‚
â”‚                           â”‚    return new ...;     â”‚       â”‚
â”‚                           â”‚ }                      â”‚       â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Taking Address & Calling

```
TAKING ADDRESS OF MEMBER FUNCTION:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FormType formTypes[] = {
    {"robotomy request", &Intern::createRobotomyForm}
                          ^
                          â”‚
                    Address-of operator
                    Gets pointer to the function

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Intern::createRobotomyForm  â”‚
                    â”‚ (function in memory)        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–²
                               â”‚
                    formTypes[1].creator points here


CALLING THROUGH POINTER:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

(this->*(formTypes[i].creator))(target)
 â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€
  â”‚              â”‚                  â”‚
  â”‚              â”‚                  â””â”€ Argument to pass
  â”‚              â”‚
  â”‚              â””â”€ Dereference & select function
  â”‚
  â””â”€ Object to call it on (Intern instance)

Breakdown:
1. this                     â†’ Pointer to current Intern object
2. formTypes[i].creator     â†’ Get function pointer from array
3. this->*creator           â†’ Bind function to this object
4. (this->*creator)(target) â†’ Call the function with argument
```

---

## Code Flow Diagrams

### Complete makeForm() Flow

```
USER CODE                    INTERN::makeForm()                    CREATOR METHOD
â•â•â•â•â•â•â•â•â•                   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

intern.makeForm(              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  "robotomy request",    â”€â”€â”€â”€â–¶â”‚ 1. Initialize    â”‚
  "Bender"                    â”‚    FormType[]    â”‚
)                             â”‚    array         â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ 2. Loop through  â”‚
                              â”‚    array         â”‚
                              â”‚                  â”‚
                              â”‚  i=0: "shrubbery"â”‚
                              â”‚  âœ— No match      â”‚
                              â”‚                  â”‚
                              â”‚  i=1: "robotomy" â”‚
                              â”‚  âœ“ MATCH!        â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ 3. Print message â”‚
                              â”‚    "Intern       â”‚
                              â”‚     creates..."  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ 4. Call creator  â”‚
                              â”‚    via function  â”‚
                              â”‚    pointer       â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ new              â”‚
                              â”‚ (this->*creator) â”‚                â”‚ RobotomyRequest  â”‚
                              â”‚      (target)    â”‚                â”‚ Form("Bender")   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚                                    â”‚
                                      â”‚                                    â”‚
                                      â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚            â”‚
                                      â”‚            â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      MEMORY:
                              â”‚ 5. Return        â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
AForm* form         â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    AForm*        â”‚      â”‚ Robotomy     â”‚
  points here!                â”‚    pointer       â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚ Request Form â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ object       â”‚
                                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### FormType Array Structure

```
FormType formTypes[] = ...

Memory Layout:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Index 0:  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ name: "shrubbery creation"                  â”‚
          â”‚ creator: &Intern::createShrubberyForm  â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                                            â”‚
Index 1:  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
          â”‚ name: "robotomy request"                    â”‚  â”‚
          â”‚ creator: &Intern::createRobotomyForm  â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
                                                            â”‚ â”‚
Index 2:  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
          â”‚ name: "presidential pardon"                 â”‚  â”‚ â”‚
          â”‚ creator: &Intern::createPresidentialForm  â”€â”€â”¼â”€â”€â”¼â”€â”¼â”€â”
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚
                                                            â”‚ â”‚ â”‚
Function Pointers Point To:                                 â”‚ â”‚ â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                 â”‚ â”‚ â”‚
                                                            â”‚ â”‚ â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  AForm* Intern::createShrubberyForm(const string& target) { â”‚ â”‚
â”‚      return new ShrubberyCreationForm(target);              â”‚ â”‚
â”‚  }                                                           â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  AForm* Intern::createRobotomyForm(const string& target) {    â”‚
â”‚      return new RobotomyRequestForm(target);                  â”‚
â”‚  }                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  AForm* Intern::createPresidentialForm(const string& target) {
â”‚      return new PresidentialPardonForm(target);
â”‚  }
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### Lookup Process Visualization

```
Looking for: "robotomy request"

Step 1: Check index 0
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ formTypes[0].name            â”‚
â”‚ "shrubbery creation"         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
"shrubbery creation" == "robotomy request" ? âœ— NO
Continue to next...

Step 2: Check index 1
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ formTypes[1].name            â”‚
â”‚ "robotomy request"           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
"robotomy request" == "robotomy request" ? âœ“ YES!
        â”‚
        â–¼
Get formTypes[1].creator
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ &Intern::createRobotomyForm  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
Call: (this->*creator)(target)
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ new RobotomyRequestForm(...)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
Return AForm* pointer
```

---

## Memory Model

### Object Creation Timeline

```
TIME:  t0              t1                    t2                  t3
       â”‚               â”‚                     â”‚                   â”‚
       â–¼               â–¼                     â–¼                   â–¼

STACK: â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚        â”‚    â”‚ Intern â”‚            â”‚ Intern â”‚         â”‚ Intern â”‚
       â”‚        â”‚    â”‚ intern â”‚            â”‚ intern â”‚         â”‚ intern â”‚
       â”‚        â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚        â”‚    â”‚ AForm* â”‚            â”‚ AForm* â”‚         â”‚ AForm* â”‚
       â”‚        â”‚    â”‚  form  â”‚â”€â”€â”€â”€â”       â”‚  form  â”‚â”€â”€â”€â”€â”    â”‚  form  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚                     â”‚
HEAP:  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚        â”‚    â”‚        â”‚    â”‚       â”‚ Robotomyâ”‚    â”‚    â”‚        â”‚
       â”‚        â”‚    â”‚        â”‚    â”‚       â”‚ Request â”‚â—€â”€â”€â”€â”˜    â”‚        â”‚
       â”‚        â”‚    â”‚        â”‚    â”‚       â”‚  Form   â”‚         â”‚        â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€ (dangling!)

t0: Initial state (no objects)
t1: Intern object created on stack, form pointer uninitialized
t2: makeForm() creates RobotomyRequestForm on heap, form pointer points to it
t3: delete form called - heap object destroyed, form pointer now invalid
```

### Ownership Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      OWNERSHIP RULES                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Intern (Factory)                 Form (Product)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚              â”‚                â”‚              â”‚             â”‚
â”‚  â”‚  makeForm()  â”‚â”€â”€â”€â”€createsâ”€â”€â”€â”€â–¶â”‚  AForm       â”‚             â”‚
â”‚  â”‚              â”‚                â”‚  object      â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â”‚                               â–²                      â”‚
â”‚         â”‚                               â”‚                      â”‚
â”‚         â”‚                         ownership                    â”‚
â”‚         â”‚                         transfers                    â”‚
â”‚         â”‚                               â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€returnsâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                   AForm*                                       â”‚
â”‚                                                                â”‚
â”‚  Intern does NOT own the form!                                 â”‚
â”‚  Caller receives ownership!                                    â”‚
â”‚  Caller MUST delete the form!                                  â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Code:
â•â•â•â•â•
Intern intern;                    // Intern on stack
AForm *form = intern.makeForm();  // Form on heap
                                  // Caller owns form!
// Use form...
delete form;                      // Caller must delete!
```

---

## Comparison: If/Else vs Factory

### If/Else Chain (What We Avoid)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IF/ELSE APPROACH                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  AForm* makeForm(string name, string target) {         â”‚
â”‚                                                         â”‚
â”‚    if (name == "shrubbery creation") {     â”€â”€â”€â”€â”       â”‚
â”‚        cout << "Intern creates ...";           â”‚       â”‚
â”‚        return new ShrubberyCreationForm(...);  â”‚       â”‚
â”‚    }                                           â”‚       â”‚
â”‚    else if (name == "robotomy request") {  â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”  â”‚
â”‚        cout << "Intern creates ...";           â”‚    â”‚  â”‚
â”‚        return new RobotomyRequestForm(...);    â”‚    â”‚  â”‚
â”‚    }                                           â”‚    â”‚  â”‚
â”‚    else if (name == "presidential ...") {  â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”â”‚
â”‚        cout << "Intern creates ...";           â”‚    â”‚ â”‚â”‚
â”‚        return new PresidentialPardonForm(...); â”‚    â”‚ â”‚â”‚
â”‚    }                                           â”‚    â”‚ â”‚â”‚
â”‚    else {                                  â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”¼â”¤
â”‚        throw FormNotFoundException();          â”‚    â”‚ â”‚â”‚
â”‚    }                                           â”‚    â”‚ â”‚â”‚
â”‚  }                                             â”‚    â”‚ â”‚â”‚
â”‚                                                â”‚    â”‚ â”‚â”‚
â”‚  Problems:                                     â”‚    â”‚ â”‚â”‚
â”‚  âœ— Message duplicated 3 times â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚â”‚
â”‚  âœ— Structure duplicated 3 times â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  âœ— Hard to add new forms â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  âœ— Violates DRY principle                           â”‚
â”‚  âœ— Error-prone to maintain                          â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Factory Pattern (Elegant Solution)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  FACTORY PATTERN                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  AForm* makeForm(string name, string target) {         â”‚
â”‚                                                         â”‚
â”‚    FormType formTypes[] = {            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        {"shrubbery", &Intern::create1}, â”‚ Data          â”‚
â”‚        {"robotomy", &Intern::create2},  â”‚ Definition    â”‚
â”‚        {"presidential", &Intern::create3}â”‚ (Easy to     â”‚
â”‚    };                                   â”‚  modify!)     â”‚
â”‚                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    for (int i = 0; i < 3; i++) {       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        if (formTypes[i].name == name) { â”‚ Single        â”‚
â”‚            cout << "Intern creates..."; â”‚ Success       â”‚
â”‚            return (this->*creator)(...);â”‚ Path          â”‚
â”‚        }                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    }                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚ Single        â”‚
â”‚    throw FormNotFoundException();      â”‚ Failure       â”‚
â”‚  }                                      â”‚ Path          â”‚
â”‚                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Benefits:                                              â”‚
â”‚  âœ“ No duplication                                       â”‚
â”‚  âœ“ Data-driven                                          â”‚
â”‚  âœ“ Easy to extend                                       â”‚
â”‚  âœ“ Follows DRY                                          â”‚
â”‚  âœ“ Maintainable                                         â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Side-by-Side Comparison

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    IF/ELSE CHAIN    â”‚  FACTORY PATTERN    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     â”‚                     â”‚
â”‚ Lines of code: ~20  â”‚ Lines of code: ~15  â”‚
â”‚                     â”‚                     â”‚
â”‚ if (...)            â”‚ FormType types[] =  â”‚
â”‚   return new ...    â”‚   {data...};        â”‚
â”‚ else if (...)       â”‚                     â”‚
â”‚   return new ...    â”‚ for (...)           â”‚
â”‚ else if (...)       â”‚   if (match)        â”‚
â”‚   return new ...    â”‚     return create() â”‚
â”‚ else                â”‚                     â”‚
â”‚   throw ...         â”‚ throw ...           â”‚
â”‚                     â”‚                     â”‚
â”‚ Duplication: HIGH   â”‚ Duplication: NONE   â”‚
â”‚ Maintainability: âœ—  â”‚ Maintainability: âœ“  â”‚
â”‚ Scalability: âœ—      â”‚ Scalability: âœ“      â”‚
â”‚ Readability: âœ—      â”‚ Readability: âœ“      â”‚
â”‚                     â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Class Relationships

### Complete Class Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLASS HIERARCHY                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                       â”‚   AForm      â”‚                           â”‚
â”‚                       â”‚  (abstract)  â”‚                           â”‚
â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
â”‚                       â”‚ - name       â”‚                           â”‚
â”‚                       â”‚ - signed     â”‚                           â”‚
â”‚                       â”‚ - gradeSign  â”‚                           â”‚
â”‚                       â”‚ - gradeExec  â”‚                           â”‚
â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
â”‚                       â”‚ + execute()  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                       â”‚ # executeAction() = 0â”‚      â”‚            â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚            â”‚
â”‚                              â–²                      â”‚            â”‚
â”‚                              â”‚ inherits             â”‚            â”‚
â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚            â”‚
â”‚                 â”‚            â”‚            â”‚         â”‚            â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”        â”‚
â”‚        â”‚ Shrubbery  â”‚ â”‚  Robotomy  â”‚ â”‚  Presidential  â”‚        â”‚
â”‚        â”‚  Creation  â”‚ â”‚   Request  â”‚ â”‚     Pardon     â”‚        â”‚
â”‚        â”‚    Form    â”‚ â”‚    Form    â”‚ â”‚     Form       â”‚        â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚               â–²              â–²               â–²                   â”‚
â”‚               â”‚              â”‚               â”‚                   â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                              â”‚                                   â”‚
â”‚                         created by                               â”‚
â”‚                              â”‚                                   â”‚
â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                       â”‚    Intern    â”‚                           â”‚
â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
â”‚                       â”‚ + makeForm() â”‚                           â”‚
â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
â”‚                       â”‚ - create1()  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚                       â”‚ - create2()  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚            â”‚
â”‚                       â”‚ - create3()  â”‚â”€â”€â”     â”‚     â”‚            â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚     â”‚            â”‚
â”‚                                         â”‚     â”‚     â”‚            â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”       â”‚
â”‚                                    â”‚   FormType struct  â”‚       â”‚
â”‚                                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚                                    â”‚ string name        â”‚       â”‚
â”‚                                    â”‚ function pointer   â”‚       â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Interaction Diagram

```
Client Code          Intern                 Form Classes
â•â•â•â•â•â•â•â•â•â•â•         â•â•â•â•â•â•â•               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”‚                  â”‚                         â”‚
    â”‚  makeForm()      â”‚                         â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                         â”‚
    â”‚  "robotomy",     â”‚                         â”‚
    â”‚  "Bender"        â”‚                         â”‚
    â”‚                  â”‚                         â”‚
    â”‚                  â”‚  Lookup in array        â”‚
    â”‚                  â”‚â”€ â”€ â”€ â”€ â”€ â”€ â”€           â”‚
    â”‚                  â”‚                â”‚        â”‚
    â”‚                  â”‚â—€ â”€ â”€ â”€ â”€ â”€ â”€ â”€         â”‚
    â”‚                  â”‚  Found match!           â”‚
    â”‚                  â”‚                         â”‚
    â”‚                  â”‚  createRobotomyForm()   â”‚
    â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
    â”‚                  â”‚                         â”‚
    â”‚                  â”‚  new RobotomyRequestFormâ”‚
    â”‚                  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚                  â”‚                         â”‚
    â”‚  AForm* form     â”‚                         â”‚
    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                         â”‚
    â”‚                  â”‚                         â”‚
    â”‚  form->execute() â”‚                         â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚
    â”‚                  â”‚                         â”‚
    â”‚  delete form     â”‚                         â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚
    â”‚                  â”‚                         â”‚
    â–¼                  â–¼                         â–¼
```

---

## Detailed Examples

### Example 1: Successful Form Creation

```
Code:
â•â•â•â•â•
Intern intern;
AForm *form = intern.makeForm("robotomy request", "Bender");

Visual Flow:
â•â•â•â•â•â•â•â•â•â•â•â•

1. Stack Frame Created
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Function: main()    â”‚
   â”‚                     â”‚
   â”‚ intern: Intern      â”‚  â—€â”€â”€ Object on stack
   â”‚ form: AForm*        â”‚  â—€â”€â”€ Pointer (uninitialized)
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. makeForm() Called
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Function: makeForm()â”‚
   â”‚                     â”‚
   â”‚ this: &intern       â”‚
   â”‚ name: "robotomy..." â”‚
   â”‚ target: "Bender"    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. Array Lookup
   formTypes[0].name == "shrubbery..." âœ—
   formTypes[1].name == "robotomy..."  âœ“  â—€â”€â”€ Match!

4. Function Pointer Call
   (this->*formTypes[1].creator)("Bender")
                    â”‚
                    â””â”€â”€â–¶ createRobotomyForm("Bender")
                                â”‚
                                â””â”€â”€â–¶ new RobotomyRequestForm("Bender")

5. Heap Allocation
   HEAP:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ RobotomyRequestForm        â”‚
   â”‚ â”œâ”€ name: "RobotomyReq..." â”‚
   â”‚ â”œâ”€ signed: false           â”‚
   â”‚ â”œâ”€ gradeSign: 72           â”‚
   â”‚ â”œâ”€ gradeExec: 45           â”‚
   â”‚ â””â”€ _target: "Bender"       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â–²
              â”‚
              â””â”€â”€â”€ form points here

6. Return
   main's form variable now points to heap object
```

### Example 2: Invalid Form Name

```
Code:
â•â•â•â•â•
try {
    Intern intern;
    AForm *form = intern.makeForm("invalid form", "target");
}
catch (Intern::FormNotFoundException &e) {
    cout << e.what() << endl;
}

Visual Flow:
â•â•â•â•â•â•â•â•â•â•â•â•

1. makeForm() Called with "invalid form"

2. Array Lookup
   formTypes[0].name == "shrubbery..." âœ—
   formTypes[1].name == "robotomy..."  âœ—
   formTypes[2].name == "presidential..."  âœ—

3. No Match Found
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Loop completed          â”‚
   â”‚ No form created         â”‚
   â”‚                         â”‚
   â”‚ Error message printed:  â”‚
   â”‚ "Intern cannot create   â”‚
   â”‚  form: \"invalid form\" â”‚
   â”‚  does not exist"        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. Exception Thrown
   throw FormNotFoundException()
              â”‚
              â””â”€â”€â–¶ Control jumps to catch block

5. Catch Block Handles Error
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ catch block executed    â”‚
   â”‚                         â”‚
   â”‚ e.what() returns:       â”‚
   â”‚ "Form type not found!"  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FACTORY PATTERN SUMMARY                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Problem: Create different form types without if/else chains  â”‚
â”‚  Solution: Use array of function pointers                     â”‚
â”‚                                                                â”‚
â”‚  Components:                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. Product Interface (AForm*)                            â”‚ â”‚
â”‚  â”‚    â””â”€â–¶ Common interface for all products                â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ 2. Concrete Products (3 Form Types)                     â”‚ â”‚
â”‚  â”‚    â””â”€â–¶ Specific implementations                         â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ 3. Factory (Intern)                                     â”‚ â”‚
â”‚  â”‚    â””â”€â–¶ Creates products based on input                 â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ 4. Lookup Table (FormType array)                        â”‚ â”‚
â”‚  â”‚    â””â”€â–¶ Maps names to creator functions                 â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚ 5. Creator Functions (private methods)                  â”‚ â”‚
â”‚  â”‚    â””â”€â–¶ Encapsulate object creation logic               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚  Benefits:                                                     â”‚
â”‚  âœ“ Clean separation of concerns                               â”‚
â”‚  âœ“ Easy to add new form types                                 â”‚
â”‚  âœ“ No code duplication                                        â”‚
â”‚  âœ“ Data-driven design                                         â”‚
â”‚  âœ“ Follows industry best practices                            â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Visual learning complete! You can now "see" how the Factory Pattern works! ğŸ‘ï¸âœ¨**
